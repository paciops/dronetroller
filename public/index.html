<html class="card-panel teal lighten-3">
    <head>
        <title>Drone</title>
        <link rel="icon" href="icon.png">
        <meta charset="utf-8" name="viewport" content="width=device-width"/>
        <!-- SCRIPT -->
        <script type="text/javascript" src="/bower_components/jquery/dist/jquery.min.js"></script>
        <script type="text/jscript" src="/bower_components/Materialize/bin/materialize.js"></script>
        <script type="text/javascript" src="javascripts/drone.js"></script>
        <script type="text/javascript" src="/bower_components/angular/angular.min.js"></script>
        <script type="text/javascript" src="../node_modules/dronestream/dist/nodecopter-client.js"></script>
        <script type="text/javascript" src="/dronestatus/nodecopter-client.js"></script>
        <!-- CSS -->
        <link rel="stylesheet" href="/bower_components/Materialize/bin/materialize.css">
        <link rel="stylesheet" href="stylesheets/style.css">
    </head>
    <body ng-app>
        
        <div id="controllerD" class="card-panel blue lighten-2">
            <a id="avanti" class="btn-floating btn-large waves-effect waves-light purple accent-2" onmousedown="Esegui('front')" onmouseup="Stop()">
                <i class="mdi-hardware-keyboard-arrow-up">
                </i>
            </a><br><br>
            <a id="sx" class="btn-floating btn-large waves-effect waves-light red" onmousedown="Esegui('left')" onmouseup="Stop()">
                <i class="mdi-hardware-keyboard-arrow-left">
                </i>
            </a>
            <a id="dx" class="btn-floating btn-large waves-effect waves-light grey lighten-2" onmousedown="Esegui('right')" onmouseup="Stop()">
                <i class="mdi-hardware-keyboard-arrow-right">
                </i>
            </a><br><br>
            <a id="indietro" class="btn-floating btn-large waves-effect waves-light brown" onmousedown="Esegui('back')" onmouseup="Stop()">
                <i class="mdi-hardware-keyboard-arrow-down">
                </i>
            </a><br><br>
            <a id="decolla" class="waves-effect waves-light btn-large orange" onmousedown="Esegui('takeoff')">
                Decolla<i class="mdi-editor-vertical-align-top right"></i>
            </a>
            <a id="atterra" class="waves-effect waves-light btn-large green" onmousedown="Esegui('land')">
                Atterra<i class="mdi-editor-vertical-align-bottom right"></i>
            </a>
        </div>
        <div id="controllerR" class="card-panel amber">
            <a id="su" class="btn-floating btn-large waves-effect waves-light red" onmousedown="Esegui('up')" onmouseup="Stop()">
                <i class="mdi-file-file-upload">
                </i>
            </a><br><br>
            <a id="ruotaSx" class="btn-floating btn-large waves-effect waves-light blue" onmousedown="Esegui('rSx')" onmouseup="Stop()">
                <i class="mdi-image-rotate-left">
                </i>
            </a>
            <a id="ruotaDx" class="btn-floating btn-large waves-effect waves-light black" onmousedown="Esegui('rDx')" onmouseup="Stop()">
                <i class="mdi-image-rotate-right">
                </i>
            </a><br><br>
            <a id="giu" class="btn-floating btn-large waves-effect waves-light pink" onmousedown="Esegui('down')" onmouseup="Stop()">
                <i class="mdi-file-file-download">
                </i>
            </a><br><br>
            <a id="emergenza" class="waves-effect waves-light btn-large red" onmousedown="Esegui('emerg')" >
                Emergenza<i class="mdi-alert-warning right"></i>
            </a>
        </div>
        <div id="valori" class="card-panel yellow">
            <form action="#">
                <p class="range-field">
                    Velocità verticale  {{vv}}
                    <input type="range" id="velocitaV" min="0" max="100" ng-model="vv" ng-init="vv=50"/>
                </p>
                <p class="range-field">
                    Velocità rotazione  {{vr}}
                    <input type="range" id="velocitaR" min="0" max="100" ng-model="vr" ng-init="vr=50"/>
                </p>
                <p class="range-field">
                    Altezza massima  {{a}} m
                    <input type="range" id="altezza" min="0" max="10" step="0.5" ng-model="a" ng-init="a=3" onchange="inviaA()" />
                </p>
                <p id="battery"></p>
            </form>
        </div>
        <div id="secondo">
            <div id="tasti" class="card-panel red darken-1">
                <a id="animB" class="waves-effect waves-light btn-large blue lighten-2" onclick="document.getElementById('ANIM').style.display='block'">
                    <i class="mdi-content-send">
                    </i>
                </a>
                <br><br><br>
                <a id="ledB" class="waves-effect waves-light btn-large yellow" onclick="document.getElementById('LED').style.display='block'">
                    <i class="mdi-image-wb-incandescent">
                    </i>
                </a>
            </a>
            </div>
            <div id="droneStream"></div>
        </div>
        <div id="ANIM">
            <button onclick="document.getElementById('ANIM').style.display='none'">X</button>
            <br>
            <table>
                <tr>
                    <td><button onclick="animazione(this.innerHTML)">phiM30Deg</button></td>
                    <td><button onclick="animazione(this.innerHTML)">phi30Deg</button></td>
                    <td><button onclick="animazione(this.innerHTML)">thetaM30Deg</button></td>
                    <td><button onclick="animazione(this.innerHTML)">theta30Deg</button></td>
                    <td><button onclick="animazione(this.innerHTML)">theta20degYaw200deg</button></td>
                </tr>
                <tr>
                    <td><button onclick="animazione(this.innerHTML)">theta20degYawM200deg</button></td>
                    <td><button onclick="animazione(this.innerHTML)">turnaround</button></td>
                    <td><button onclick="animazione(this.innerHTML)">turnaroundGodown</button></td>
                    <td><button onclick="animazione(this.innerHTML)">yawShake</button></td>
                    <td><button onclick="animazione(this.innerHTML)">yawDance</button></td>
                </tr>
                <tr>
                    <td><button onclick="animazione(this.innerHTML)">phiDance</button></td>
                    <td><button onclick="animazione(this.innerHTML)">thetaDance</button></td>
                    <td><button onclick="animazione(this.innerHTML)">vzDance</button></td>
                    <td><button onclick="animazione(this.innerHTML)">wave</button></td>
                    <td><button onclick="animazione(this.innerHTML)">phiThetaMixed</button></td>
                </tr>
                <tr>
                    <td><button onclick="animazione(this.innerHTML)">doublePhiThetaMixed</button></td>
                    <td><button onclick="animazione(this.innerHTML)">flipAhead</button></td>
                    <td><button onclick="animazione(this.innerHTML)">flipBehind</button></td>
                    <td><button onclick="animazione(this.innerHTML)">flipLeft</button></td>
                    <td><button onclick="animazione(this.innerHTML)">flipRight</button></td>
                </tr>
            </table>
        </div>
        <div id="LED">
            <button onclick="document.getElementById('LED').style.display='none'">X</button>
            <br>
            <table>
                <tr>
                    <td><button onclick="led(this.innerHTML)">blinkGreenRed</button></td>
                    <td><button onclick="led(this.innerHTML)">blinkGreen</button></td>
                    <td><button onclick="led(this.innerHTML)">blinkRed</button></td>
                    <td><button onclick="led(this.innerHTML)">blinkOrange</button></td>
                    <td><button onclick="led(this.innerHTML)">snakeGreenRed</button></td>
                </tr>
                <tr>
                    <td><button onclick="led(this.innerHTML)">fire</button></td>
                    <td><button onclick="led(this.innerHTML)">blinkStandard</button></td>
                    <td><button onclick="led(this.innerHTML)">red</button></td>
                    <td><button onclick="led(this.innerHTML)">green</button></td>
                    <td><button onclick="led(this.innerHTML)">redSnake</button></td>
                </tr>
                <tr>
                    <td><button onclick="led(this.innerHTML)">blank</button></td>
                    <td><button onclick="led(this.innerHTML)">rightMissile</button></td>
                    <td><button onclick="led(this.innerHTML)">leftMissile</button></td>
                    <td><button onclick="led(this.innerHTML)">doubleMissile</button></td>
                    <td><button onclick="led(this.innerHTML)">frontLeftGreenOthersRed</button></td>
                </tr>
                <tr>
                    <td><button onclick="led(this.innerHTML)">frontRightGreenOthersRed</button></td>
                    <td><button onclick="led(this.innerHTML)">rearRightGreenOthersRed</button></td>
                    <td><button onclick="led(this.innerHTML)">rearLeftGreenOthersRed</button></td>
                    <td><button onclick="led(this.innerHTML)">leftGreenRightRed</button></td>
                    <td><button onclick="led(this.innerHTML)">leftRedRightGreen</button></td>
                </tr>
            </table>

        </div>
        <script>
            new NodecopterStream(document.getElementById("droneStream"));
            new NodecopterStatus().on('change', function (message) {
                document.getElementById("battery").innerHTML ="Batteria "+JSON.parse(message.data)["demo"]["batteryPercentage"]+"%";
            });
        </script>
    </body>
</html>